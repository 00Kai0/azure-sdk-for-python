[tox]
envlist = py36-{linux,macos,windows},py27-{linux,macos,windows}

[base]
deps = 
  -rdev_requirements.txt
  pytest
  pytest-cov

[pytest]
out_options = --junitxml={toxinidir}/test-junit-{envname}.xml --verbose --durations=10
cov_options = --cov --cov-report=

[testenv]
platform = linux: linux
           macos: darwin
           windows: win32
passenv = *
deps = {[base]deps}
usedevelop = True
changedir = {toxinidir}

commands = 
    pytest \
      {[pytest]cov_options} \
      {[pytest]out_options} \
      {posargs} \
      {toxinidir}

    pylint \
      --output-format=parseable \
      --rcfile {toxinidir}/../../../pylintrc \
      --exit-zero \
      {toxinidir}/azure
