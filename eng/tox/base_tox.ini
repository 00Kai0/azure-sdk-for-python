[tox]
envlist = py36-{linux,macos,windows},py27-{linux,macos,windows}

[base]
deps = 
  -rdev_requirements.txt
  pylint==2.3.0; python_version >= '3.4'
  pylint==1.9.4; python_version < '3.4'

[pytest]
out_options = --junitxml={toxinidir}/test-junit-{envname}.xml --verbose --durations=10
cov_options = --cov --cov-report=
markers = cosmosEmulator: indicates a test that requires an active cosmos emulator to properly execute

[testenv]
platform = linux: linux
           macos: darwin
           windows: win32
passenv = *
deps = {[base]deps}
usedevelop = True
changedir = {toxinidir}

commands = 
    pytest \
      {[pytest]cov_options} \
      {[pytest]out_options} \
      {posargs} \
      {toxinidir}

    pylint \
      --output-format=parseable \
      --rcfile {toxinidir}/../../../pylintrc \
      --exit-zero \
      {toxinidir}/azure
